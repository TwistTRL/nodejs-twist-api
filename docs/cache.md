## Cache for API

### Create Database Table

```sql
-- API_CACHE_INOUT
CREATE TABLE API_CACHE_INOUT(
    PERSON_ID NUMBER,
    INOUT_VALUE NUMBER,
    SHORT_LABEL VARCHAR2(50),
    DT_UNIX NUMBER,
    INOUT_TYPE NUMBER
);

CREATE INDEX INOUT_PERSON_ID 
ON API_CACHE_INOUT(PERSON_ID);

INSERT INTO API_CACHE_INOUT
  (PERSON_ID, INOUT_VALUE, SHORT_LABEL, DT_UNIX, INOUT_TYPE)
VALUES
  (:person_id, :inout_value, :short_label, :dt_unix, :inout_type);


-- API_CACHE_DIAGNOSIS
CREATE TABLE API_CACHE_DIAGNOSIS(
    PERSON_ID NUMBER,
    AGE_DISPLAY VARCHAR2(50),
    SEX_DISPLAY VARCHAR2(20),
    HETEROTAXY_DISPLAY VARCHAR2(20),
    SDD_DISPLAY VARCHAR2(20),
    DISEASE_DISPLAY VARCHAR2(100),
    EVENT_ID NUMBER,
    DT_UNIX NUMBER,
    DIAGNOSES VARCHAR2(200),
    OPERATIVE_DISPLAY VARCHAR2(100)
);

CREATE INDEX DIAGNOSIS_PERSON_ID 
ON API_CACHE_DIAGNOSIS(PERSON_ID);

INSERT INTO API_CACHE_DIAGNOSIS
  (PERSON_ID, AGE_DISPLAY, SEX_DISPLAY, HETEROTAXY_DISPLAY, SDD_DISPLAY, DISEASE_DISPLAY, EVENT_ID, DT_UNIX, DIAGNOSES, OPERATIVE_DISPLAY )
VALUES
  (:person_id, :age_display, :sex_display, :heterotaxy_display, :sdd_display, :disease_display, :event_id, :unix_time, :diagnoses, :operative_display);


-- API_CACHE_PROCEDURAL_NOTE
CREATE TABLE API_CACHE_PROCEDURAL_NOTE(
    EVENT_ID NUMBER,
    PROCEDURAL_NOTE VARCHAR2(4000 CHAR),
    UPDT_TM DATE,
    NOTE_ORDER NUMBER NOT NULL
);

CREATE INDEX PROCEDURAL_NOTE_EVENT_ID 
ON API_CACHE_PROCEDURAL_NOTE(EVENT_ID);

INSERT INTO API_CACHE_PROCEDURAL_NOTE
  (EVENT_ID, PROCEDURAL_NOTE, UPDT_TM, NOTE_ORDER)
VALUES
  (:event_id, :procedural_note, TO_DATE(:update_time, 'YYYY-MM-DD HH24:MI:SS'), :note_order);


  
-- API_CACHE_MED
CREATE TABLE API_CACHE_MED(
  PERSON_ID NUMBER(19,0),
  CATEGORY VARCHAR2(50),
  NAME VARCHAR2(50),
  START NUMBER,
  END NUMBER,
  DRUG VARCHAR2(40 CHAR),
  RXCUI NUMBER,
  DOSE NUMBER,
  UNIT VARCHAR2(11 CHAR),
  DOSING_WEIGHT NUMBER,
  ROUTE VARCHAR2(80 CHAR),
  TIME NUMBER,
  LVL NUMBER(19,0),
  COMMENT VARCHAR2(255 CHAR),
  DEVICE VARCHAR2(227 CHAR),
  INSTILLATION VARCHAR2(3 CHAR),
  MEDICATION VARCHAR2(3 CHAR),
  OXYGENATION VARCHAR2(3 CHAR),
  TYPE VARCHAR2(114 CHAR)
);

CREATE INDEX CACHE_MED_PERSON_ID 
ON API_CACHE_MED(PERSON_ID);

INSERT INTO API_CACHE_MED
  (PERSON_ID, 
  MED_CATEGORY,
  MED_NAME,
  START_TIME,
  END_TIME,
  DRUG,
  RXCUI,
  DOSE,
  UNIT,
  DOSING_WEIGHT,
  ROUTE,
  SUCTION_TIME,
  LVL,
  COMMENT,
  DEVICE,
  INSTILLATION,
  MEDICATION,
  OXYGENATION,
  SUCTION_TYPE)
VALUES
  (:person_id, 
  :category,
  :name,
  :start,
  :end,
  :drug,
  :rxcui,
  :dose,
  :unit,
  :dosing_weight,
  :route,
  :time,
  :lvl,
  :comment,
  :device,
  :instillation,
  :medication,
  :oxygenation,
  :type);




-- API_CACHE_CENSUS
CREATE TABLE API_CACHE_CENSUS(
    DTUNIX NUMBER, 
    PERSON_ID NUMBER,
    MRN VARCHAR2(20), 
    FIRST_NAME VARCHAR2(50),
    MIDDLE_NAME VARCHAR2(50), 
    LAST_NAME VARCHAR2(50), 
    BIRTH_UNIX_TS NUMBER, 
    DECEASED_UNIX_TS NUMBER, 
    SEX NUMBER, 
    BED_START_UNIX NUMBER, 
    BED_END_UNIX NUMBER,
    LOC_NURSE_UNIT_CD NUMBER,  
    LOC_ROOM_CD NUMBER, 
    NURSE_UNIT_DISP VARCHAR2(50), 
    LOCATION_BED VARCHAR2(50), 
    BED_DISP VARCHAR2(50), 
    ROOM_DISP VARCHAR2(50), 
    ASSIGN_ID NUMBER, 
    BED_ASSIGN_ID NUMBER, 
    PATIENT_WEIGHT FLOAT, 
    WEIGHT_UNIX NUMBER, 
    -- oracle doesn't has BOOLEAN so using 1/0 for true/false
    E NUMBER(1) DEFAULT 0 NOT NULL, 
    V NUMBER(1) DEFAULT 0 NOT NULL, 
    N NUMBER(1) DEFAULT 0 NOT NULL, 
    INO NUMBER(1) DEFAULT 0 NOT NULL, 
    AGE_DISPLAY VARCHAR2(50), 
    ANATOMY_DISPLAY VARCHAR2(50), 
    RSS NUMBER, 
    RST VARCHAR2(50), 
    RSS_UNIX NUMBER, 
    ECMO_FLOW_NORM NUMBER, 
    ECMO_VAD_SCORE NUMBER, 
    ECMO_UNIX NUMBER,
    TEAM VARCHAR2(50), 
    CHIEF_COMPLAINT VARCHAR2(200), 
    PERSONNEL_LIST_ID VARCHAR2(50)
);

CREATE INDEX CACHE_CENSUS_TIMESTAMP 
ON API_CACHE_CENSUS(TIMESTAMP);

-- API_CACHE_CENSUS_PERSONNEL
CREATE TABLE API_CACHE_CENSUS_PERSONNEL(
    PERSONNEL_LIST_ID VARCHAR2(50), 
    NAME_FULL_FORMATTED VARCHAR2(80),
    CONTACT_NUM VARCHAR2(20), 
    ASSIGN_TYPE VARCHAR2(50), 
    TEAM_ASSIGN_TYPE VARCHAR2(50), 
    START_UNIX NUMBER, 
    END_UNIX NUMBER
);

CREATE INDEX CACHE_CENSUS_PERSONNEL_LIST_ID 
ON API_CACHE_CENSUS_PERSONNEL(PERSONNEL_LIST_ID);


-- API_CACHE_XRAY
CREATE TABLE API_CACHE_XRAY(
    MRN VARCHAR2(20),
    PATIENT_NAME VARCHAR2(50),
    STUDY_ID NUMBER,
    STUDY_DESCRIPTION VARCHAR2(50),
    BIRTH_DATE VARCHAR2(30),
    INSTITUTION VARCHAR2(50),
    ACCESSION_NUMBER NUMBER,
    REFERRING_PHYSICIAN NUMBER,
    UPDT_UNIX NUMBER,
    IMAGE_BASE64 VARCHAR2(4000 CHAR)
);

-- API_CACHE_CENSUS_INFUSION
CREATE TABLE API_CACHE_CENSUS_INFUSION(
    DTUNIX NUMBER, 
    PERSON_ID NUMBER,
    TIME_TYPE NUMBER,    
    DRUG VARCHAR2(80),
    END_UNIX NUMBER,
    INFUSION_RATE NUMBER, 
    INFUSION_RATE_UNITS VARCHAR2(50), 
    RXCUI NUMBER
);

CREATE INDEX CACHE_CENSUS_INFUSIONS_DTUNIX_ID 
ON API_CACHE_CENSUS_INFUSION(DTUNIX);




CREATE INDEX INDEX_XRAY_MRN 
ON API_CACHE_XRAY(MRN);

INSERT INTO INDEX_XRAY_MRN
  (MRN, PATIENT_NAME, STUDY_ID, STUDY_DESCRIPTION, BIRTH_DATE, INSTITUTION, ACCESSION_NUMBER, REFERRING_PHYSICIAN, UPDT_UNIX, IMAGE_BASE64)
VALUES
  (:mrn, :patient_name, :study_id, :study_description, :birth_date, :institution, :accession_number, :referring_physician, :updt_unix, :image_base64);


-------------------------------------------

Create a copy of an Oracle table without copying the data

https://stackoverflow.com/questions/233870/how-can-i-create-a-copy-of-an-oracle-table-without-copying-the-data

```sql
CREATE TABLE API_CACHE_RSS AS SELECT * FROM RSS WHERE 1=0;
```

